{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "üöÄ Debug BusBuddy WPF (Enhanced)",
      "type": "coreclr",
      "request": "launch",
      "preLaunchTask": "üî® Build with Analysis",
      "postDebugTask": "üßπ Clean All",
      "program": "${workspaceFolder}/BusBuddy.WPF/bin/Debug/net8.0-windows/BusBuddy.WPF.dll",
      "args": [
        "--debug-mode",
        "--verbose-logging"
      ],
      "cwd": "${workspaceFolder}/BusBuddy.WPF",
      "stopAtEntry": false,
      "console": "integratedTerminal",
      "justMyCode": true,
      "env": {
        "DOTNET_ENVIRONMENT": "Development",
        "BUSBUDDY_DEBUG_ENABLED": "true",
        "BUSBUDDY_VERBOSE_LOGGING": "true",
        "BUSBUDDY_PERFORMANCE_MONITORING": "true"
      },
      "symbolOptions": {
        "searchMicrosoftSymbolServer": true,
        "searchNuGetOrgSymbolServer": true,
        "moduleFilter": {
          "mode": "loadAllButExcluded",
          "excludedModules": [
            "System.*",
            "Microsoft.*"
          ]
        }
      },
      "logging": {
        "moduleLoad": false,
        "processExit": true,
        "programOutput": true,
        "exceptions": true,
        "browserStdOut": true
      }
    },
    {
      "name": "üß™ Debug All Tests (Comprehensive)",
      "type": "coreclr",
      "request": "launch",
      "preLaunchTask": "üî® Build with Analysis",
      "postDebugTask": "üìà Generate Development Report",
      "program": "dotnet",
      "args": [
        "test",
        "${workspaceFolder}/BusBuddy.Tests/BusBuddy.Tests.csproj",
        "--logger",
        "console;verbosity=detailed",
        "--settings",
        "testsettings.runsettings",
        "--collect",
        "XPlat Code Coverage",
        "--results-directory",
        "./TestResults"
      ],
      "cwd": "${workspaceFolder}",
      "console": "internalConsole",
      "justMyCode": false,
      "env": {
        "DOTNET_ENVIRONMENT": "Testing",
        "BUSBUDDY_TEST_MODE": "true",
        "BUSBUDDY_DEBUG_ENABLED": "true"
      }
    },
    {
      "name": "üîç Debug Specific Test Category",
      "type": "coreclr",
      "request": "launch",
      "preLaunchTask": "üî® Build with Analysis",
      "program": "dotnet",
      "args": [
        "test",
        "${workspaceFolder}/BusBuddy.Tests/BusBuddy.Tests.csproj",
        "--filter",
        "Category=${input:testCategory}",
        "--logger",
        "console;verbosity=detailed"
      ],
      "cwd": "${workspaceFolder}",
      "console": "internalConsole",
      "justMyCode": false
    },
    {
      "name": "üêõ Debug Null Handling & Database",
      "type": "coreclr",
      "request": "launch",
      "preLaunchTask": "üî® Build with Analysis",
      "program": "dotnet",
      "args": [
        "test",
        "${workspaceFolder}/BusBuddy.Tests/BusBuddy.Tests.csproj",
        "--filter",
        "FullyQualifiedName~DatabaseNullHandlingTests|FullyQualifiedName~NullSafetyTests",
        "--logger",
        "console;verbosity=detailed"
      ],
      "cwd": "${workspaceFolder}",
      "console": "internalConsole",
      "justMyCode": false,
      "env": {
        "ENABLE_DB_VALIDATION": "true",
        "VERBOSE_LOGGING": "true",
        "NULL_SAFETY_CHECKS": "true"
      }
    },
    {
      "name": "‚ö° Debug PowerShell Advanced Workflows",
      "type": "PowerShell",
      "request": "launch",
      "script": "${workspaceFolder}/.vscode/BusBuddy-Advanced-Workflows.ps1",
      "args": [
        "-Debug",
        "-Verbose"
      ],
      "cwd": "${workspaceFolder}",
      "createTemporaryIntegratedConsole": false,
      "env": {
        "BUSBUDDY_POWERSHELL_DEBUG": "true"
      }
    },
    {
      "name": "üîß Debug PowerShell Profile System",
      "type": "PowerShell",
      "request": "launch",
      "script": "${workspaceFolder}/load-bus-buddy-profiles.ps1",
      "args": [
        "-Force",
        "-Verbose"
      ],
      "cwd": "${workspaceFolder}",
      "createTemporaryIntegratedConsole": false
    },
    {
      "name": "üîó Attach to Running BusBuddy Process",
      "type": "coreclr",
      "request": "attach",
      "processId": "${command:pickProcess}",
      "justMyCode": false,
      "symbolOptions": {
        "searchMicrosoftSymbolServer": true,
        "searchNuGetOrgSymbolServer": true
      }
    },
    {
      "name": "üè≠ Debug Production-like Environment",
      "type": "coreclr",
      "request": "launch",
      "preLaunchTask": "üîÑ CI/CD Simulation",
      "program": "${workspaceFolder}/BusBuddy.WPF/bin/Release/net8.0-windows/BusBuddy.WPF.dll",
      "args": [],
      "cwd": "${workspaceFolder}/BusBuddy.WPF",
      "stopAtEntry": false,
      "console": "integratedTerminal",
      "justMyCode": true,
      "env": {
        "DOTNET_ENVIRONMENT": "Production",
        "BUSBUDDY_PRODUCTION_MODE": "true",
        "BUSBUDDY_DEBUG_ENABLED": "false"
      }
    },
    {
      "name": "üìä Debug with Performance Monitoring",
      "type": "coreclr",
      "request": "launch",
      "preLaunchTask": "üìä Performance Profiling Setup",
      "program": "${workspaceFolder}/BusBuddy.WPF/bin/Debug/net8.0-windows/BusBuddy.WPF.dll",
      "args": [
        "--performance-monitoring"
      ],
      "cwd": "${workspaceFolder}/BusBuddy.WPF",
      "stopAtEntry": false,
      "console": "integratedTerminal",
      "justMyCode": false,
      "env": {
        "DOTNET_ENVIRONMENT": "Development",
        "BUSBUDDY_PERFORMANCE_MONITORING": "true",
        "BUSBUDDY_TRACE_ENABLED": "true",
        "COMPlus_PerfMapEnabled": "1"
      },
      "symbolOptions": {
        "searchMicrosoftSymbolServer": true,
        "searchNuGetOrgSymbolServer": true
      }
    },
    {
      "name": "üîê Debug Security & Validation",
      "type": "coreclr",
      "request": "launch",
      "preLaunchTask": "üîê Security Audit",
      "program": "${workspaceFolder}/BusBuddy.WPF/bin/Debug/net8.0-windows/BusBuddy.WPF.dll",
      "args": [
        "--security-mode",
        "--strict-validation"
      ],
      "cwd": "${workspaceFolder}/BusBuddy.WPF",
      "stopAtEntry": false,
      "console": "integratedTerminal",
      "justMyCode": false,
      "env": {
        "ENABLE_DB_VALIDATION": "true",
        "SECURITY_AUDIT_MODE": "true",
        "STRICT_VALIDATION": "true",
        "VERBOSE_LOGGING": "true"
      }
    }
  ],
  "compounds": [
    {
      "name": "üöÄ Full Development Debug Session",
      "configurations": [
        "‚ö° Debug PowerShell Advanced Workflows",
        "üöÄ Debug BusBuddy WPF (Enhanced)",
        "üß™ Debug All Tests (Comprehensive)"
      ],
      "stopAll": true,
      "preLaunchTask": "‚ö° Quick Development Cycle"
    },
    {
      "name": "üî¨ Comprehensive Testing & Analysis",
      "configurations": [
        "üöÄ Debug BusBuddy WPF (Enhanced)",
        "üß™ Debug All Tests (Comprehensive)",
        "üìä Debug with Performance Monitoring"
      ],
      "stopAll": true
    },
    {
      "name": "üõ°Ô∏è Security & Validation Testing",
      "configurations": [
        "üîê Debug Security & Validation",
        "üêõ Debug Null Handling & Database"
      ],
      "stopAll": true
    },
    {
      "name": "‚ö° PowerShell Development Environment",
      "configurations": [
        "üîß Debug PowerShell Profile System",
        "‚ö° Debug PowerShell Advanced Workflows"
      ],
      "stopAll": false
    },
    {
      "name": "üè≠ Production Simulation",
      "configurations": [
        "üè≠ Debug Production-like Environment"
      ],
      "preLaunchTask": "üîÑ CI/CD Simulation"
    }
  ],
  "inputs": [
    {
      "id": "testCategory",
      "description": "Select test category to debug",
      "type": "pickString",
      "options": [
        "Unit",
        "Integration",
        "Database",
        "UI",
        "Performance",
        "Security",
        "NullHandling"
      ],
      "default": "Unit"
    }
  ]
}
